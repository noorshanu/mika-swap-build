{"version":3,"file":"static/js/7284.5988ba54.chunk.js","mappings":"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","sources":["components/Charts/PriceChart/utils.ts","components/Charts/LineChart.tsx","components/Charts/SparklineChart.tsx","components/Icons/Info.tsx","components/Tokens/TokenTable/TokenRow.tsx","components/Tokens/state.ts"],"sourcesContent":["import { bisector, ScaleLinear, timeDay, timeHour, TimeInterval, timeMinute, timeMonth } from 'd3'\r\nimport { PricePoint, TimePeriod } from 'graphql/data/util'\r\n\r\n/**\r\n * Returns the minimum and maximum values in the given array of PricePoints.\r\n */\r\nexport function getPriceBounds(prices: PricePoint[]): { min: number; max: number } {\r\n  if (!prices.length) return { min: 0, max: 0 }\r\n\r\n  let min = prices[0].value\r\n  let max = prices[0].value\r\n\r\n  for (const pricePoint of prices) {\r\n    if (pricePoint.value < min) {\r\n      min = pricePoint.value\r\n    }\r\n    if (pricePoint.value > max) {\r\n      max = pricePoint.value\r\n    }\r\n  }\r\n\r\n  return { min, max }\r\n}\r\n\r\n/**\r\n * Cleans an array of PricePoints by removing zero values and marking gaps in data as blanks.\r\n *\r\n * @param prices - The original array of PricePoints\r\n * @returns An object containing two arrays: fixedChart and blanks\r\n */\r\nexport function cleanPricePoints(prices: PricePoint[]) {\r\n  const validPrices: PricePoint[] = [] // PricePoint array with 0 values removed\r\n  const blanks: [PricePoint, PricePoint][] = [] // PricePoint pairs that represent blank spaces in the chart\r\n  let lastValidPrice: PricePoint | undefined\r\n\r\n  prices.forEach((pricePoint, index) => {\r\n    if (pricePoint.value !== 0) {\r\n      const isFirstValidPrice = validPrices.length === 0\r\n\r\n      if (isFirstValidPrice && index !== 0) {\r\n        const blankStart = { timestamp: prices[0].timestamp, value: pricePoint.value }\r\n        blanks.push([blankStart, pricePoint])\r\n      }\r\n\r\n      lastValidPrice = pricePoint\r\n      validPrices.push(pricePoint)\r\n    }\r\n  })\r\n\r\n  if (lastValidPrice) {\r\n    const isLastPriceInvalid = lastValidPrice !== prices[prices.length - 1]\r\n\r\n    if (isLastPriceInvalid) {\r\n      const blankEnd = { timestamp: prices[prices.length - 1].timestamp, value: lastValidPrice.value }\r\n      blanks.push([lastValidPrice, blankEnd])\r\n    }\r\n  }\r\n\r\n  return { prices: validPrices, blanks, lastValidPrice }\r\n}\r\n\r\n/**\r\n * Retrieves the nearest PricePoint to a given x-coordinate based on a linear time scale.\r\n *\r\n * @param x - The x-coordinate to find the nearest PricePoint for.\r\n * @param prices - An array of PricePoints, assumed to be sorted by timestamp.\r\n * @param timeScale - A D3 ScaleLinear instance for time scaling.\r\n * @returns The nearest PricePoint to the given x-coordinate.\r\n */\r\nexport function getNearestPricePoint(\r\n  x: number,\r\n  prices: PricePoint[],\r\n  timeScale: ScaleLinear<number, number, never>\r\n): PricePoint | undefined {\r\n  // Convert the x-coordinate back to a timestamp\r\n  const targetTimestamp = timeScale.invert(x)\r\n\r\n  // Use bisector for O(log N) complexity, assumes prices are sorted by timestamp\r\n  const bisect = bisector((d: PricePoint) => d.timestamp).left\r\n  const index = bisect(prices, targetTimestamp, 1)\r\n\r\n  // Get potential nearest PricePoints\r\n  const previousPoint = prices[index - 1]\r\n  const nextPoint = prices[index]\r\n\r\n  // Default to the previous point if next point doesn't exist\r\n  if (!nextPoint) {\r\n    return previousPoint\r\n  }\r\n\r\n  // Calculate temporal distances to target timestamp\r\n  const distanceToPrevious = Math.abs(targetTimestamp.valueOf() - previousPoint.timestamp.valueOf())\r\n  const distanceToNext = Math.abs(nextPoint.timestamp.valueOf() - targetTimestamp.valueOf())\r\n\r\n  // Return the PricePoint with the smallest temporal distance to targetTimestamp\r\n  return distanceToPrevious < distanceToNext ? previousPoint : nextPoint\r\n}\r\n\r\nconst fiveMinutes = timeMinute.every(5)\r\nconst TIME_PERIOD_INTERVAL_TABLE: Record<TimePeriod, { interval: TimeInterval; step: number }> = {\r\n  [TimePeriod.HOUR]: fiveMinutes\r\n    ? { interval: fiveMinutes, step: 2 } // spaced 10 minutes apart at times that end in 0 or 5\r\n    : { interval: timeMinute, step: 10 }, // spaced 10 minutes apart, backup incase fiveMinutes doesn't initialize\r\n  [TimePeriod.DAY]: { interval: timeHour, step: 4 }, // spaced 4 hours apart\r\n  [TimePeriod.WEEK]: { interval: timeDay, step: 1 }, // spaced 1 day apart\r\n  [TimePeriod.MONTH]: { interval: timeDay, step: 7 }, // spaced 1 week apart\r\n  [TimePeriod.YEAR]: { interval: timeMonth, step: 2 }, // spaced 2 months apart\r\n}\r\n\r\n/**\r\n * Returns an array of tick values for a given time range and time period.\r\n * This function makes sure that the ticks are evenly spaced and are not too close to the edges.\r\n */\r\nexport function getTicks(startTime: number, endTime: number, timePeriod: TimePeriod, maxTicks: number) {\r\n  if (maxTicks === 0 || endTime <= startTime) return []\r\n\r\n  // Prevents ticks from being too close to the axis edge\r\n  const tickMargin = (endTime - startTime) / 24\r\n\r\n  const startDate = new Date((startTime + tickMargin) * 1000)\r\n  const endDate = new Date((endTime - tickMargin) * 1000)\r\n\r\n  const { interval, step } = TIME_PERIOD_INTERVAL_TABLE[timePeriod]\r\n  const ticks = interval.range(startDate, endDate, step).map((x) => x.valueOf() / 1000) // convert to seconds\r\n\r\n  if (ticks.length <= maxTicks) return ticks\r\n\r\n  const newTicks = []\r\n  const tickSpacing = Math.floor(ticks.length / maxTicks)\r\n  for (let i = 1; i < ticks.length; i += tickSpacing) {\r\n    newTicks.push(ticks[i])\r\n  }\r\n  return newTicks\r\n}\r\n","import { Group } from '@visx/group'\r\nimport { LinePath } from '@visx/shape'\r\nimport { CurveFactory } from 'd3'\r\nimport React from 'react'\r\nimport { ReactNode } from 'react'\r\nimport { useTheme } from 'styled-components'\r\n\r\nexport interface LineChartProps<T> {\r\n  data: T[]\r\n  getX: (t: T) => number\r\n  getY: (t: T) => number\r\n  marginTop?: number\r\n  curve: CurveFactory\r\n  color?: string\r\n  strokeWidth: number\r\n  children?: ReactNode\r\n  width: number\r\n  height: number\r\n}\r\n\r\nfunction LineChart<T>({\r\n  data,\r\n  getX,\r\n  getY,\r\n  marginTop,\r\n  curve,\r\n  color,\r\n  strokeWidth,\r\n  width,\r\n  height,\r\n  children,\r\n}: LineChartProps<T>) {\r\n  const theme = useTheme()\r\n  return (\r\n    <svg width={width} height={height}>\r\n      <Group top={marginTop}>\r\n        <LinePath\r\n          curve={curve}\r\n          stroke={color ?? theme.accent1}\r\n          strokeWidth={strokeWidth}\r\n          data={data}\r\n          x={getX}\r\n          y={getY}\r\n        />\r\n      </Group>\r\n      {children}\r\n    </svg>\r\n  )\r\n}\r\n\r\nexport default React.memo(LineChart) as typeof LineChart\r\n","import { SparkLineLoadingBubble } from 'components/Tokens/TokenTable/TokenRow'\r\nimport { curveCardinal, scaleLinear } from 'd3'\r\nimport { SparklineMap, TopToken } from 'graphql/data/TopTokens'\r\nimport { PricePoint } from 'graphql/data/util'\r\nimport { memo } from 'react'\r\nimport styled, { useTheme } from 'styled-components'\r\n\r\nimport LineChart from './LineChart'\r\nimport { getPriceBounds } from './PriceChart/utils'\r\n\r\nconst LoadingContainer = styled.div`\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\ninterface SparklineChartProps {\r\n  width: number\r\n  height: number\r\n  tokenData: TopToken\r\n  pricePercentChange?: number | null\r\n  sparklineMap: SparklineMap\r\n}\r\n\r\nfunction _SparklineChart({ width, height, tokenData, pricePercentChange, sparklineMap }: SparklineChartProps) {\r\n  const theme = useTheme()\r\n  // for sparkline\r\n  const pricePoints = tokenData?.address ? sparklineMap[tokenData.address] : null\r\n\r\n  // Don't display if there's one or less pricepoints\r\n  if (!pricePoints || pricePoints.length <= 1) {\r\n    return (\r\n      <LoadingContainer>\r\n        <SparkLineLoadingBubble />\r\n      </LoadingContainer>\r\n    )\r\n  }\r\n\r\n  const startingPrice = pricePoints[0]\r\n  const endingPrice = pricePoints[pricePoints.length - 1]\r\n  const widthScale = scaleLinear()\r\n    .domain(\r\n      // the range of possible input values\r\n      [startingPrice.timestamp, endingPrice.timestamp]\r\n    )\r\n    .range(\r\n      // the range of possible output values that the inputs should be transformed to (see https://www.d3indepth.com/scales/ for details)\r\n      [0, 110]\r\n    )\r\n\r\n  const { min, max } = getPriceBounds(pricePoints)\r\n  const rdScale = scaleLinear().domain([min, max]).range([30, 0])\r\n  const curveTension = 0.9\r\n\r\n  return (\r\n    <LineChart\r\n      data={pricePoints}\r\n      getX={(p: PricePoint) => widthScale(p.timestamp)}\r\n      getY={(p: PricePoint) => rdScale(p.value)}\r\n      curve={curveCardinal.tension(curveTension)}\r\n      marginTop={5}\r\n      color={pricePercentChange && pricePercentChange < 0 ? theme.critical : theme.success}\r\n      strokeWidth={1.5}\r\n      width={width}\r\n      height={height}\r\n    />\r\n  )\r\n}\r\n\r\nexport default memo(_SparklineChart)\r\n","import { ComponentProps } from 'react'\r\n\r\nexport const Info = (props: ComponentProps<'svg'>) => (\r\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n    <path\r\n      d=\"M12 2C6.477 2 2 6.477 2 12C2 17.523 6.477 22 12 22C17.523 22 22 17.523 22 12C22 6.477 17.523 2 12 2ZM12.75 16.5C12.75 16.914 12.414 17.25 12 17.25C11.586 17.25 11.25 16.914 11.25 16.5V11.929C11.25 11.515 11.586 11.179 12 11.179C12.414 11.179 12.75 11.515 12.75 11.929V16.5ZM12.02 9.5C11.468 9.5 11.0149 9.052 11.0149 8.5C11.0149 7.948 11.458 7.5 12.01 7.5H12.02C12.573 7.5 13.02 7.948 13.02 8.5C13.02 9.052 12.572 9.5 12.02 9.5Z\"\r\n      fill=\"#9B9B9B\"\r\n    />\r\n  </svg>\r\n)\r\n","import { Trans } from '@lingui/macro'\r\nimport { InterfaceEventName } from '@uniswap/analytics-events'\r\nimport { ParentSize } from '@visx/responsive'\r\nimport { sendAnalyticsEvent } from 'analytics'\r\nimport SparklineChart from 'components/Charts/SparklineChart'\r\nimport { ArrowChangeDown } from 'components/Icons/ArrowChangeDown'\r\nimport { ArrowChangeUp } from 'components/Icons/ArrowChangeUp'\r\nimport { Info } from 'components/Icons/Info'\r\nimport QueryTokenLogo from 'components/Logo/QueryTokenLogo'\r\nimport { MouseoverTooltip } from 'components/Tooltip'\r\nimport { useInfoExplorePageEnabled } from 'featureFlags/flags/infoExplore'\r\nimport { SparklineMap, TopToken } from 'graphql/data/TopTokens'\r\nimport { getTokenDetailsURL, supportedChainIdFromGQLChain, validateUrlChainParam } from 'graphql/data/util'\r\nimport { useAtomValue } from 'jotai/utils'\r\nimport { ForwardedRef, forwardRef } from 'react'\r\nimport { CSSProperties, ReactNode } from 'react'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport styled, { css, useTheme } from 'styled-components'\r\nimport { BREAKPOINTS } from 'theme'\r\nimport { ClickableStyle } from 'theme/components'\r\nimport { NumberType, useFormatter } from 'utils/formatNumbers'\r\n\r\nimport {\r\n  LARGE_MEDIA_BREAKPOINT,\r\n  MAX_WIDTH_MEDIA_BREAKPOINT,\r\n  MEDIUM_MEDIA_BREAKPOINT,\r\n  SMALL_MEDIA_BREAKPOINT,\r\n} from '../constants'\r\nimport { LoadingBubble } from '../loading'\r\nimport {\r\n  filterStringAtom,\r\n  filterTimeAtom,\r\n  sortAscendingAtom,\r\n  sortMethodAtom,\r\n  TokenSortMethod,\r\n  useSetSortMethod,\r\n} from '../state'\r\nimport { DeltaArrow, DeltaText } from '../TokenDetails/Delta'\r\n\r\nconst Cell = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`\r\nconst StyledTokenRow = styled.div<{\r\n  first?: boolean\r\n  last?: boolean\r\n  $loading?: boolean\r\n}>`\r\n  background-color: transparent;\r\n  display: grid;\r\n  font-size: 16px;\r\n  grid-template-columns: 1fr 7fr 4fr 4fr 4fr 4fr 5fr;\r\n  line-height: 24px;\r\n  max-width: ${MAX_WIDTH_MEDIA_BREAKPOINT};\r\n  min-width: 390px;\r\n  ${({ first, last }) => css`\r\n    height: ${first || last ? '72px' : '64px'};\r\n    padding-top: ${first ? '8px' : '0px'};\r\n    padding-bottom: ${last ? '8px' : '0px'};\r\n  `}\r\n  padding-left: 12px;\r\n  padding-right: 12px;\r\n  transition: ${({\r\n    theme: {\r\n      transition: { duration, timing },\r\n    },\r\n  }) => css`background-color ${duration.medium} ${timing.ease}`};\r\n  width: 100%;\r\n  transition-duration: ${({ theme }) => theme.transition.duration.fast};\r\n\r\n  &:hover {\r\n    ${({ $loading, theme }) =>\r\n      !$loading &&\r\n      css`\r\n        background-color: ${theme.deprecated_hoverDefault};\r\n      `}\r\n    ${({ last }) =>\r\n      last &&\r\n      css`\r\n        border-radius: 0px 0px 8px 8px;\r\n      `}\r\n  }\r\n\r\n  @media only screen and (max-width: ${MAX_WIDTH_MEDIA_BREAKPOINT}) {\r\n    grid-template-columns: 1fr 6.5fr 4.5fr 4.5fr 4.5fr 4.5fr 1.7fr;\r\n  }\r\n\r\n  @media only screen and (max-width: ${LARGE_MEDIA_BREAKPOINT}) {\r\n    grid-template-columns: 1fr 7.5fr 4.5fr 4.5fr 4.5fr 1.7fr;\r\n  }\r\n\r\n  @media only screen and (max-width: ${MEDIUM_MEDIA_BREAKPOINT}) {\r\n    grid-template-columns: 1fr 10fr 5fr 5fr 1.2fr;\r\n  }\r\n\r\n  @media only screen and (max-width: ${SMALL_MEDIA_BREAKPOINT}) {\r\n    grid-template-columns: 2fr 3fr;\r\n    min-width: unset;\r\n    border-bottom: 0.5px solid ${({ theme }) => theme.surface2};\r\n\r\n    :last-of-type {\r\n      border-bottom: none;\r\n    }\r\n  }\r\n`\r\n\r\nconst ClickableContent = styled.div<{ gap?: number }>`\r\n  display: flex;\r\n  ${({ gap }) => gap && `gap: ${gap}px`};\r\n  text-decoration: none;\r\n  color: ${({ theme }) => theme.neutral1};\r\n  align-items: center;\r\n  cursor: pointer;\r\n`\r\nconst ClickableName = styled(ClickableContent)`\r\n  gap: 12px;\r\n  max-width: 100%;\r\n`\r\nconst StyledHeaderRow = styled(StyledTokenRow)`\r\n  border-bottom: 1px solid;\r\n  border-color: ${({ theme }) => theme.surface3};\r\n  border-radius: 8px 8px 0px 0px;\r\n  color: ${({ theme }) => theme.neutral2};\r\n  font-size: 14px;\r\n  height: 48px;\r\n  line-height: 16px;\r\n  padding: 0px 12px;\r\n  width: 100%;\r\n  justify-content: center;\r\n\r\n  &:hover {\r\n    background-color: transparent;\r\n  }\r\n\r\n  @media only screen and (max-width: ${SMALL_MEDIA_BREAKPOINT}) {\r\n    justify-content: space-between;\r\n  }\r\n`\r\n\r\nconst ListNumberCell = styled(Cell)<{ header: boolean }>`\r\n  color: ${({ theme }) => theme.neutral2};\r\n  min-width: 32px;\r\n  font-size: 14px;\r\n\r\n  @media only screen and (max-width: ${SMALL_MEDIA_BREAKPOINT}) {\r\n    display: none;\r\n  }\r\n`\r\nconst DataCell = styled(Cell)<{ sortable: boolean }>`\r\n  justify-content: flex-end;\r\n  min-width: 80px;\r\n  user-select: ${({ sortable }) => (sortable ? 'none' : 'unset')};\r\n  transition: ${({\r\n    theme: {\r\n      transition: { duration, timing },\r\n    },\r\n  }) => css`background-color ${duration.medium} ${timing.ease}`};\r\n`\r\nconst TvlCell = styled(DataCell)`\r\n  padding-right: 8px;\r\n  @media only screen and (max-width: ${MEDIUM_MEDIA_BREAKPOINT}) {\r\n    display: none;\r\n  }\r\n`\r\nconst NameCell = styled(Cell)`\r\n  justify-content: flex-start;\r\n  padding: 0px 8px;\r\n  min-width: 240px;\r\n  gap: 8px;\r\n\r\n  @media only screen and (max-width: ${BREAKPOINTS.xs}px) {\r\n    min-width: 200px;\r\n  }\r\n`\r\nconst PriceCell = styled(DataCell)`\r\n  padding-right: 8px;\r\n`\r\nconst PercentChangeCell = styled(DataCell)`\r\n  padding-right: 8px;\r\n  @media only screen and (max-width: ${SMALL_MEDIA_BREAKPOINT}) {\r\n    display: none;\r\n  }\r\n`\r\nconst PercentChangeInfoCell = styled(Cell)`\r\n  display: none;\r\n\r\n  @media only screen and (max-width: ${SMALL_MEDIA_BREAKPOINT}) {\r\n    display: flex;\r\n    gap: 3px;\r\n    justify-content: flex-end;\r\n    color: ${({ theme }) => theme.neutral2};\r\n    font-size: 12px;\r\n    line-height: 16px;\r\n  }\r\n`\r\nconst PriceInfoCell = styled(Cell)`\r\n  justify-content: flex-end;\r\n  flex: 1;\r\n\r\n  @media only screen and (max-width: ${SMALL_MEDIA_BREAKPOINT}) {\r\n    flex-direction: column;\r\n    align-items: flex-end;\r\n  }\r\n`\r\n\r\nconst HeaderCellWrapper = styled.span<{ onClick?: () => void }>`\r\n  align-items: center;\r\n  cursor: ${({ onClick }) => (onClick ? 'pointer' : 'unset')};\r\n  display: flex;\r\n  gap: 4px;\r\n  justify-content: flex-end;\r\n  width: 100%;\r\n\r\n  &:hover {\r\n    ${ClickableStyle}\r\n  }\r\n`\r\nconst SparkLineCell = styled(Cell)`\r\n  padding: 0px 24px;\r\n  min-width: 120px;\r\n\r\n  @media only screen and (max-width: ${MAX_WIDTH_MEDIA_BREAKPOINT}) {\r\n    display: none;\r\n  }\r\n`\r\nconst SparkLine = styled(Cell)`\r\n  width: 124px;\r\n  height: 42px;\r\n`\r\nconst StyledLink = styled(Link)`\r\n  text-decoration: none;\r\n`\r\nconst TokenInfoCell = styled(Cell)`\r\n  gap: 8px;\r\n  line-height: 24px;\r\n  font-size: 16px;\r\n  max-width: inherit;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n\r\n  @media only screen and (max-width: ${SMALL_MEDIA_BREAKPOINT}) {\r\n    justify-content: flex-start;\r\n    flex-direction: column;\r\n    gap: 0px;\r\n    width: max-content;\r\n    font-weight: 535;\r\n  }\r\n`\r\nconst TokenName = styled.div`\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  max-width: 100%;\r\n`\r\nconst TokenSymbol = styled(Cell)`\r\n  color: ${({ theme }) => theme.neutral2};\r\n  text-transform: uppercase;\r\n\r\n  @media only screen and (max-width: ${SMALL_MEDIA_BREAKPOINT}) {\r\n    font-size: 12px;\r\n    height: 16px;\r\n    justify-content: flex-start;\r\n    width: 100%;\r\n  }\r\n`\r\nconst VolumeCell = styled(DataCell)`\r\n  padding-right: 8px;\r\n  @media only screen and (max-width: ${LARGE_MEDIA_BREAKPOINT}) {\r\n    display: none;\r\n  }\r\n`\r\nconst SmallLoadingBubble = styled(LoadingBubble)`\r\n  width: 25%;\r\n`\r\nconst MediumLoadingBubble = styled(LoadingBubble)`\r\n  width: 65%;\r\n`\r\nconst LongLoadingBubble = styled(LoadingBubble)`\r\n  width: 90%;\r\n`\r\nconst IconLoadingBubble = styled(LoadingBubble)`\r\n  border-radius: 50%;\r\n  width: 24px;\r\n`\r\nexport const SparkLineLoadingBubble = styled(LongLoadingBubble)`\r\n  height: 4px;\r\n`\r\n\r\nconst InfoIconContainer = styled.div`\r\n  width: 16px;\r\n  margin-left: 2px;\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: help;\r\n`\r\n\r\nexport const HEADER_DESCRIPTIONS: Record<TokenSortMethod, ReactNode | undefined> = {\r\n  [TokenSortMethod.PRICE]: undefined,\r\n  [TokenSortMethod.PERCENT_CHANGE]: undefined,\r\n  [TokenSortMethod.TOTAL_VALUE_LOCKED]: (\r\n    <Trans>\r\n      Total value locked (TVL) is the aggregate amount of the asset available across all Uniswap v3 liquidity pools.\r\n    </Trans>\r\n  ),\r\n  [TokenSortMethod.VOLUME]: (\r\n    <Trans>Volume is the amount of the asset that has been traded on Uniswap v3 during the selected time frame.</Trans>\r\n  ),\r\n}\r\n\r\n/* Get singular header cell for header row */\r\nfunction HeaderCell({\r\n  category,\r\n}: {\r\n  category: TokenSortMethod // TODO: change this to make it work for trans\r\n}) {\r\n  const theme = useTheme()\r\n  const sortAscending = useAtomValue(sortAscendingAtom)\r\n  const handleSortCategory = useSetSortMethod(category)\r\n  const sortMethod = useAtomValue(sortMethodAtom)\r\n\r\n  const description = HEADER_DESCRIPTIONS[category]\r\n\r\n  return (\r\n    <HeaderCellWrapper onClick={handleSortCategory}>\r\n      {sortMethod === category && (\r\n        <>\r\n          {sortAscending ? (\r\n            <ArrowChangeUp width={16} height={16} color={theme.neutral2} />\r\n          ) : (\r\n            <ArrowChangeDown width={16} height={16} color={theme.neutral2} />\r\n          )}\r\n        </>\r\n      )}\r\n      {category}\r\n      {description && (\r\n        <MouseoverTooltip text={description} placement=\"right\">\r\n          <InfoIconContainer>\r\n            <Info width=\"16px\" height=\"16px\" />\r\n          </InfoIconContainer>\r\n        </MouseoverTooltip>\r\n      )}\r\n    </HeaderCellWrapper>\r\n  )\r\n}\r\n\r\n/* Token Row: skeleton row component */\r\nfunction TokenRow({\r\n  header,\r\n  listNumber,\r\n  tokenInfo,\r\n  price,\r\n  percentChange,\r\n  tvl,\r\n  volume,\r\n  sparkLine,\r\n  ...rest\r\n}: {\r\n  first?: boolean\r\n  header: boolean\r\n  listNumber: ReactNode\r\n  $loading?: boolean\r\n  tvl: ReactNode\r\n  price: ReactNode\r\n  percentChange: ReactNode\r\n  sparkLine?: ReactNode\r\n  tokenInfo: ReactNode\r\n  volume: ReactNode\r\n  last?: boolean\r\n  style?: CSSProperties\r\n}) {\r\n  const rowCells = (\r\n    <>\r\n      <ListNumberCell header={header}>{listNumber}</ListNumberCell>\r\n      <NameCell data-testid=\"name-cell\">{tokenInfo}</NameCell>\r\n      <PriceCell data-testid=\"price-cell\" sortable={header}>\r\n        {price}\r\n      </PriceCell>\r\n      <PercentChangeCell data-testid=\"percent-change-cell\" sortable={header}>\r\n        {percentChange}\r\n      </PercentChangeCell>\r\n      <TvlCell data-testid=\"tvl-cell\" sortable={header}>\r\n        {tvl}\r\n      </TvlCell>\r\n      <VolumeCell data-testid=\"volume-cell\" sortable={header}>\r\n        {volume}\r\n      </VolumeCell>\r\n      <SparkLineCell>{sparkLine}</SparkLineCell>\r\n    </>\r\n  )\r\n  if (header) return <StyledHeaderRow data-testid=\"header-row\">{rowCells}</StyledHeaderRow>\r\n  return <StyledTokenRow {...rest}>{rowCells}</StyledTokenRow>\r\n}\r\n\r\n/* Header Row: top header row component for table */\r\nexport function HeaderRow() {\r\n  return (\r\n    <TokenRow\r\n      header={true}\r\n      listNumber=\"#\"\r\n      tokenInfo={<Trans>Token name</Trans>}\r\n      price={<HeaderCell category={TokenSortMethod.PRICE} />}\r\n      percentChange={<HeaderCell category={TokenSortMethod.PERCENT_CHANGE} />}\r\n      tvl={<HeaderCell category={TokenSortMethod.TOTAL_VALUE_LOCKED} />}\r\n      volume={<HeaderCell category={TokenSortMethod.VOLUME} />}\r\n      sparkLine={null}\r\n    />\r\n  )\r\n}\r\n\r\n/* Loading State: row component with loading bubbles */\r\nexport function LoadingRow(props: { first?: boolean; last?: boolean }) {\r\n  return (\r\n    <TokenRow\r\n      header={false}\r\n      listNumber={<SmallLoadingBubble />}\r\n      $loading\r\n      tokenInfo={\r\n        <>\r\n          <IconLoadingBubble />\r\n          <MediumLoadingBubble />\r\n        </>\r\n      }\r\n      price={<MediumLoadingBubble />}\r\n      percentChange={<LoadingBubble />}\r\n      tvl={<LoadingBubble />}\r\n      volume={<LoadingBubble />}\r\n      sparkLine={<SparkLineLoadingBubble />}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\ninterface LoadedRowProps {\r\n  tokenListIndex: number\r\n  tokenListLength: number\r\n  token: NonNullable<TopToken>\r\n  sparklineMap: SparklineMap\r\n  sortRank: number\r\n}\r\n\r\n/* Loaded State: row component with token information */\r\nexport const LoadedRow = forwardRef((props: LoadedRowProps, ref: ForwardedRef<HTMLDivElement>) => {\r\n  const { formatFiatPrice, formatNumber, formatDelta } = useFormatter()\r\n\r\n  const { tokenListIndex, tokenListLength, token, sortRank } = props\r\n  const filterString = useAtomValue(filterStringAtom)\r\n\r\n  const filterNetwork = validateUrlChainParam(useParams<{ chainName?: string }>().chainName?.toUpperCase())\r\n  const chainId = supportedChainIdFromGQLChain(filterNetwork)\r\n  const timePeriod = useAtomValue(filterTimeAtom)\r\n  const delta = token.market?.pricePercentChange?.value\r\n  const formattedDelta = formatDelta(delta)\r\n\r\n  const exploreTokenSelectedEventProperties = {\r\n    chain_id: chainId,\r\n    token_address: token.address,\r\n    token_symbol: token.symbol,\r\n    token_list_index: tokenListIndex,\r\n    token_list_rank: sortRank,\r\n    token_list_length: tokenListLength,\r\n    time_frame: timePeriod,\r\n    search_token_address_input: filterString,\r\n  }\r\n\r\n  // A simple 0 price indicates the price is not currently available from the api\r\n  const price = token.market?.price?.value === 0 ? '-' : formatFiatPrice({ price: token.market?.price?.value })\r\n\r\n  const isInfoExplorePageEnabled = useInfoExplorePageEnabled()\r\n\r\n  // TODO: currency logo sizing mobile (32px) vs. desktop (24px)\r\n  return (\r\n    <div ref={ref} data-testid={`token-table-row-${token.address}`}>\r\n      <StyledLink\r\n        to={getTokenDetailsURL({ ...token, isInfoExplorePageEnabled })}\r\n        onClick={() =>\r\n          sendAnalyticsEvent(InterfaceEventName.EXPLORE_TOKEN_ROW_CLICKED, exploreTokenSelectedEventProperties)\r\n        }\r\n      >\r\n        <TokenRow\r\n          header={false}\r\n          listNumber={sortRank}\r\n          tokenInfo={\r\n            <ClickableName>\r\n              <QueryTokenLogo token={token} size=\"32px\" />\r\n              <TokenInfoCell>\r\n                <TokenName data-cy=\"token-name\">{token.name}</TokenName>\r\n                <TokenSymbol>{token.symbol}</TokenSymbol>\r\n              </TokenInfoCell>\r\n            </ClickableName>\r\n          }\r\n          price={\r\n            <ClickableContent>\r\n              <PriceInfoCell>\r\n                {price}\r\n                <PercentChangeInfoCell>\r\n                  <DeltaArrow delta={delta} size={14} />\r\n                  <DeltaText delta={delta}>{formattedDelta}</DeltaText>\r\n                </PercentChangeInfoCell>\r\n              </PriceInfoCell>\r\n            </ClickableContent>\r\n          }\r\n          percentChange={\r\n            <ClickableContent gap={3}>\r\n              <DeltaArrow delta={delta} />\r\n              <DeltaText delta={delta}>{formattedDelta}</DeltaText>\r\n            </ClickableContent>\r\n          }\r\n          tvl={\r\n            <ClickableContent>\r\n              {formatNumber({\r\n                input: token.market?.totalValueLocked?.value,\r\n                type: NumberType.FiatTokenStats,\r\n              })}\r\n            </ClickableContent>\r\n          }\r\n          volume={\r\n            <ClickableContent>\r\n              {formatNumber({\r\n                input: token.market?.volume?.value,\r\n                type: NumberType.FiatTokenStats,\r\n              })}\r\n            </ClickableContent>\r\n          }\r\n          sparkLine={\r\n            <SparkLine>\r\n              <ParentSize>\r\n                {({ width, height }) =>\r\n                  props.sparklineMap && (\r\n                    <SparklineChart\r\n                      width={width}\r\n                      height={height}\r\n                      tokenData={token}\r\n                      pricePercentChange={token.market?.pricePercentChange?.value}\r\n                      sparklineMap={props.sparklineMap}\r\n                    />\r\n                  )\r\n                }\r\n              </ParentSize>\r\n            </SparkLine>\r\n          }\r\n          first={tokenListIndex === 0}\r\n          last={tokenListIndex === tokenListLength - 1}\r\n        />\r\n      </StyledLink>\r\n    </div>\r\n  )\r\n})\r\n\r\nLoadedRow.displayName = 'LoadedRow'\r\n","import { TimePeriod } from 'graphql/data/util'\r\nimport { atom, useAtom } from 'jotai'\r\nimport { atomWithReset } from 'jotai/utils'\r\nimport { useCallback } from 'react'\r\n\r\nexport enum TokenSortMethod {\r\n  PRICE = 'Price',\r\n  PERCENT_CHANGE = 'Change',\r\n  TOTAL_VALUE_LOCKED = 'TVL',\r\n  VOLUME = 'Volume',\r\n}\r\n\r\nexport const filterStringAtom = atomWithReset<string>('')\r\nexport const filterTimeAtom = atom<TimePeriod>(TimePeriod.DAY)\r\nexport const sortMethodAtom = atom<TokenSortMethod>(TokenSortMethod.VOLUME)\r\nexport const sortAscendingAtom = atom<boolean>(false)\r\n\r\n/* keep track of sort category for token table */\r\nexport function useSetSortMethod(newSortMethod: TokenSortMethod) {\r\n  const [sortMethod, setSortMethod] = useAtom(sortMethodAtom)\r\n  const [sortAscending, setSortAscending] = useAtom(sortAscendingAtom)\r\n\r\n  return useCallback(() => {\r\n    if (sortMethod === newSortMethod) {\r\n      setSortAscending(!sortAscending)\r\n    } else {\r\n      setSortMethod(newSortMethod)\r\n      setSortAscending(false)\r\n    }\r\n  }, [sortMethod, setSortMethod, setSortAscending, sortAscending, newSortMethod])\r\n}\r\n"],"names":["getPriceBounds","prices","length","min","max","value","pricePoint","cleanPricePoints","validPrices","blanks","lastValidPrice","forEach","index","blankStart","timestamp","push","blankEnd","getNearestPricePoint","x","timeScale","targetTimestamp","invert","bisect","bisector","d","left","previousPoint","nextPoint","Math","abs","valueOf","fiveMinutes","timeMinute","every","TIME_PERIOD_INTERVAL_TABLE","TimePeriod","HOUR","interval","step","DAY","timeHour","WEEK","timeDay","MONTH","YEAR","timeMonth","getTicks","startTime","endTime","timePeriod","maxTicks","tickMargin","startDate","Date","endDate","ticks","range","map","newTicks","tickSpacing","floor","i","LineChart","data","getX","getY","marginTop","curve","color","strokeWidth","width","height","children","theme","useTheme","svg","Group","top","LinePath","stroke","accent1","y","React","LoadingContainer","styled","div","_SparklineChart","tokenData","pricePercentChange","sparklineMap","pricePoints","address","SparkLineLoadingBubble","startingPrice","endingPrice","widthScale","scaleLinear","domain","rdScale","p","curveCardinal","tension","critical","success","memo","Info","props","viewBox","fill","xmlns","path","Cell","StyledTokenRow","MAX_WIDTH_MEDIA_BREAKPOINT","first","last","css","transition","duration","timing","medium","ease","fast","$loading","deprecated_hoverDefault","LARGE_MEDIA_BREAKPOINT","MEDIUM_MEDIA_BREAKPOINT","SMALL_MEDIA_BREAKPOINT","surface2","ClickableContent","gap","neutral1","ClickableName","StyledHeaderRow","surface3","neutral2","ListNumberCell","DataCell","sortable","TvlCell","NameCell","BREAKPOINTS","xs","PriceCell","PercentChangeCell","PercentChangeInfoCell","PriceInfoCell","HeaderCellWrapper","span","onClick","ClickableStyle","SparkLineCell","SparkLine","StyledLink","Link","TokenInfoCell","TokenName","TokenSymbol","VolumeCell","SmallLoadingBubble","LoadingBubble","MediumLoadingBubble","LongLoadingBubble","IconLoadingBubble","InfoIconContainer","HEADER_DESCRIPTIONS","TokenSortMethod","PRICE","undefined","PERCENT_CHANGE","TOTAL_VALUE_LOCKED","VOLUME","HeaderCell","category","sortAscending","useAtomValue","sortAscendingAtom","handleSortCategory","useSetSortMethod","sortMethod","sortMethodAtom","description","ArrowChangeUp","ArrowChangeDown","MouseoverTooltip","text","placement","TokenRow","header","listNumber","tokenInfo","price","percentChange","tvl","volume","sparkLine","rest","rowCells","data-testid","HeaderRow","LoadingRow","LoadedRow","forwardRef","ref","formatFiatPrice","formatNumber","formatDelta","useFormatter","tokenListIndex","tokenListLength","token","sortRank","filterString","filterStringAtom","filterNetwork","validateUrlChainParam","useParams","chainName","toUpperCase","chainId","supportedChainIdFromGQLChain","filterTimeAtom","delta","market","formattedDelta","exploreTokenSelectedEventProperties","chain_id","token_address","token_symbol","symbol","token_list_index","token_list_rank","token_list_length","time_frame","search_token_address_input","isInfoExplorePageEnabled","useInfoExplorePageEnabled","to","getTokenDetailsURL","sendAnalyticsEvent","InterfaceEventName","EXPLORE_TOKEN_ROW_CLICKED","QueryTokenLogo","size","data-cy","name","DeltaArrow","DeltaText","input","totalValueLocked","type","NumberType","FiatTokenStats","ParentSize","SparklineChart","displayName","atomWithReset","atom","newSortMethod","setSortMethod","useAtom","setSortAscending","useCallback"],"sourceRoot":""}